<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cloud Dashboard</title>
    <link rel="stylesheet" href="/ui/common_style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Homepage-specific styles */
        .main {
            padding: 20px;
        }

        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .service-card {
            background: white;
            border-radius: 8px;
            padding: 25px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s, box-shadow 0.3s;
            text-align: center;
            border: 1px solid #e1e4e8;
        }

        .service-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .service-icon {
            font-size: 3rem;
            margin-bottom: 15px;
            color: #3498db;
        }

        .service-title {
            font-size: 1.5rem;
            margin-bottom: 10px;
            color: #2c3e50;
        }

        .service-description {
            color: #7f8c8d;
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .service-description-warning {
            color: red;
        }

        .service-link {
            display: inline-block;
            padding: 8px 20px;
            background: #3498db;
            color: white;
            border-radius: 4px;
            text-decoration: none;
            transition: background 0.3s;
        }

        .service-link:hover {
            background: #2980b9;
        }

        /* Fix header alignment */
        header {
            padding: 0 20px;
        }

        /* Divider replacement */
        .service-divider {
            display: none;
            /* We're using cards instead */
        }
    </style>
</head>

<body>
    <div class="container">
        <header>
            <h1>Cloud Dashboard</h1>
            <div class="user-info">
                <span id="userName">Loading user...</span>
                <span id="regionInfo" class="region-info"></span>
            </div>
        </header>

        <div class="content">
            <div class="main">
                <h2>Services</h2>
                <div class="services-grid">
                    <!-- Compute Service -->
                    <div class="service-card">
                        <div class="service-icon">
                            <i class="fas fa-server"></i>
                        </div>
                        <h3 class="service-title">Compute</h3>
                        <p class="service-description">
                            Manage compute, launch templates, and connect to servers
                        </p>
                        <a href="/ui/compute" class="service-link">
                            Open Compute Manager
                        </a>
                    </div>

                    <!-- AI Service -->
                    <div class="service-card">
                        <div class="service-icon">
                            <i class="fas fa-brain"></i>
                        </div>
                        <h3 class="service-title">AI Models</h3>
                        <p class="service-description">
                            Interact with Bedrock models, test prompts, and analyze responses
                        </p>
                        <a href="/ui/ai" class="service-link">
                            Open AI Manager
                        </a>
                    </div>

                    <!-- Object Storage -->
                    <div class="service-card">
                        <div class="service-icon">
                            <i class="fas fa-database"></i>
                        </div>
                        <h3 class="service-title">Object Storage</h3>
                        <p class="service-description">
                            Browse and manage your storage containers and objects
                        </p>
                        <a href="/ui/objectStore" class="service-link">
                            Open Storage Manager
                        </a>
                    </div>
                    <div class="service-card">
                        <div class="service-icon">
                            <i class="fas fa-robot"></i>
                        </div>
                        <h3 class="service-title">Multi AI</h3>
                        <p class="service-description">
                            Compare responses from multiple AI models simultaneously
                        </p>
                        <a href="/ui/multi-ai" class="service-link">
                            Open Multi AI Manager
                        </a>
                    </div>
                    <div class="service-card">
                        <div class="service-icon">
                            <i class="fas fa-robot"></i>
                        </div>
                        <h3 class="service-title">AI Verse</h3>
                        <p class="service-description service-description-warning">
                            Caution: Imersive Experience
                        </p>
                        <a href="/ui/multi-ai-v2" class="service-link">
                            Open AI Verse
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Reuse these functions from other pages
        async function loadUserInfo() {
            try {
                const response = await fetch('/api/user');
                if (!response.ok) throw new Error('Failed to load user info');
                const user = await response.json();

                let displayName = user.arn;
                if (user.userName) {
                    displayName = user.userName;
                } else if (user.arn.includes('assumed-role')) {
                    displayName = user.arn.split('/').slice(1).join('/');
                }

                document.getElementById('userName').textContent = displayName;
                document.getElementById('userName').title = `ARN: ${user.arn}\nAccount: ${user.account}\nUser ID: ${user.userId}`;
            } catch (error) {
                console.error('Error loading user info:', error);
                document.getElementById('userName').textContent = 'Unknown user';
            }
        }

        async function loadRegionInfo() {
            try {
                const response = await fetch('/api/region');
                if (!response.ok) throw new Error('Failed to load region info');
                const region = await response.json();

                const regionElement = document.getElementById('regionInfo');
                regionElement.textContent = `Region: ${region.region}`;
                if (region.isDefault) {
                    regionElement.title = 'Using default region (us-east-1)';
                } else {
                    regionElement.title = 'Configured region';
                }
            } catch (error) {
                console.error('Error loading region info:', error);
                document.getElementById('regionInfo').textContent = 'Region: Unknown';
            }
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            loadUserInfo();
            loadRegionInfo();
        });
    </script>
</body>

</html>